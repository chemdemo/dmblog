"use strict";require(["ace/ace","marked","hljs","utils"],function(e,t,n,r){function f(r,u){t.setOptions({highlight:function(e,t){return t?n.highlight(t,e).value:n.highlightAuto(e).value},breaks:!0,pedantic:!0,sanitize:!1,smartypants:!0});if(!r)throw"A html node for editor requird.";i=e.edit(r),s=i.getSession(),i.setShowPrintMargin(!1),i.setHighlightActiveLine(!1),i.setShowPrintMargin(!1),i.setTheme("ace/theme/crimson_editor"),s.setMode("ace/mode/markdown"),o=u.previewBox||null,a()}var i,s,o,u=function(){if(!o)return;var e=i.getValue();t(e,function(e,t){if(e)return console.log("Marked file error: ",e);o.html(t)})},a=function(){function e(e){var t=$(this),n=t.attr("data-cmd");switch(n){case"export-md":}}function t(e){console.log(e)}function n(e){if(!previewOpen)return;var t=this.timer||null;clearTimeout(t),this.timer=setTimeout(function(){console.log(e.data),u()},500)}function r(){console.log("cursor change!")}function s(e){console.log("cursor: ",i.selection.getCursor());if(!previewOpen)return;~util.debounce(function(){var e=o[0].scrollHeight,t=i.getFirstVisibleRow(),n=i.getSession().getLength();console.log("scrollTop: ",e*(t/n)),o.scrollTop(e*(t/n))},500,!0)()}return function(){i.on("change",n),$(".editor-btn").on("click",e),$("#import-md").on("change",t),i.session.selection.on("changeCursor",s)}}()});